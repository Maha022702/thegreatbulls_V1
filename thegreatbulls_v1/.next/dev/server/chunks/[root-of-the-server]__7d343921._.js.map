{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 106, "column": 0}, "map": {"version":3,"sources":["file:///home/aj/Documents/Projects/thegreatbulls-react/thegreatbulls_v1/src/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client'\n\nconst globalForPrisma = globalThis as unknown as {\n  prisma: PrismaClient | undefined\n}\n\nexport const prisma = globalForPrisma.prisma ?? new PrismaClient()\n\nif (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,kBAAkB;AAIjB,MAAM,SAAS,gBAAgB,MAAM,IAAI,IAAI,6QAAY;AAEhE,wCAA2C,gBAAgB,MAAM,GAAG"}},
    {"offset": {"line": 119, "column": 0}, "map": {"version":3,"sources":["file:///home/aj/Documents/Projects/thegreatbulls-react/thegreatbulls_v1/src/lib/auth.ts"],"sourcesContent":["import { NextAuthOptions } from 'next-auth'\nimport CredentialsProvider from 'next-auth/providers/credentials'\nimport { PrismaAdapter } from '@next-auth/prisma-adapter'\nimport { prisma } from '@/lib/prisma'\nimport bcrypt from 'bcryptjs'\n\nexport const authOptions: NextAuthOptions = {\n  adapter: PrismaAdapter(prisma),\n  providers: [\n    CredentialsProvider({\n      name: 'credentials',\n      credentials: {\n        email: { label: 'Email', type: 'email' },\n        password: { label: 'Password', type: 'password' }\n      },\n      async authorize(credentials) {\n        if (!credentials?.email || !credentials?.password) return null\n\n        const user = await prisma.user.findUnique({\n          where: { email: credentials.email }\n        })\n\n        if (!user || !user.password) return null\n\n        const isPasswordValid = await bcrypt.compare(credentials.password, user.password)\n\n        if (!isPasswordValid) return null\n\n        return {\n          id: user.id,\n          email: user.email,\n          name: user.name,\n          role: user.role\n        }\n      }\n    })\n  ],\n  session: {\n    strategy: 'jwt'\n  },\n  callbacks: {\n    async jwt({ token, user }) {\n      if (user) {\n        token.role = user.role\n      }\n      return token\n    },\n    async session({ session, token }) {\n      if (token) {\n        session.user.id = token.sub!\n        session.user.role = token.role as string\n      }\n      return session\n    }\n  },\n  pages: {\n    signIn: '/login'\n  }\n}"],"names":[],"mappings":";;;;AACA;AACA;AACA;AACA;;;;;AAEO,MAAM,cAA+B;IAC1C,SAAS,IAAA,8PAAa,EAAC,uMAAM;IAC7B,WAAW;QACT,IAAA,4OAAmB,EAAC;YAClB,MAAM;YACN,aAAa;gBACX,OAAO;oBAAE,OAAO;oBAAS,MAAM;gBAAQ;gBACvC,UAAU;oBAAE,OAAO;oBAAY,MAAM;gBAAW;YAClD;YACA,MAAM,WAAU,WAAW;gBACzB,IAAI,CAAC,aAAa,SAAS,CAAC,aAAa,UAAU,OAAO;gBAE1D,MAAM,OAAO,MAAM,uMAAM,CAAC,IAAI,CAAC,UAAU,CAAC;oBACxC,OAAO;wBAAE,OAAO,YAAY,KAAK;oBAAC;gBACpC;gBAEA,IAAI,CAAC,QAAQ,CAAC,KAAK,QAAQ,EAAE,OAAO;gBAEpC,MAAM,kBAAkB,MAAM,qNAAM,CAAC,OAAO,CAAC,YAAY,QAAQ,EAAE,KAAK,QAAQ;gBAEhF,IAAI,CAAC,iBAAiB,OAAO;gBAE7B,OAAO;oBACL,IAAI,KAAK,EAAE;oBACX,OAAO,KAAK,KAAK;oBACjB,MAAM,KAAK,IAAI;oBACf,MAAM,KAAK,IAAI;gBACjB;YACF;QACF;KACD;IACD,SAAS;QACP,UAAU;IACZ;IACA,WAAW;QACT,MAAM,KAAI,EAAE,KAAK,EAAE,IAAI,EAAE;YACvB,IAAI,MAAM;gBACR,MAAM,IAAI,GAAG,KAAK,IAAI;YACxB;YACA,OAAO;QACT;QACA,MAAM,SAAQ,EAAE,OAAO,EAAE,KAAK,EAAE;YAC9B,IAAI,OAAO;gBACT,QAAQ,IAAI,CAAC,EAAE,GAAG,MAAM,GAAG;gBAC3B,QAAQ,IAAI,CAAC,IAAI,GAAG,MAAM,IAAI;YAChC;YACA,OAAO;QACT;IACF;IACA,OAAO;QACL,QAAQ;IACV;AACF"}},
    {"offset": {"line": 191, "column": 0}, "map": {"version":3,"sources":["file:///home/aj/Documents/Projects/thegreatbulls-react/thegreatbulls_v1/src/app/api/courses/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server'\nimport { getServerSession } from 'next-auth'\nimport { authOptions } from '@/lib/auth'\nimport { prisma } from '@/lib/prisma'\n\nexport async function GET(request: NextRequest) {\n  try {\n    const session = await getServerSession(authOptions)\n\n    if (!session || session.user.role !== 'admin') {\n      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 })\n    }\n\n    const courses = await prisma.course.findMany({\n      include: {\n        instructor: {\n          select: {\n            id: true,\n            name: true,\n            email: true\n          }\n        },\n        modules: {\n          include: {\n            lessons: true\n          }\n        },\n        enrollments: {\n          include: {\n            user: {\n              select: {\n                id: true,\n                name: true,\n                email: true\n              }\n            }\n          }\n        },\n        _count: {\n          select: {\n            enrollments: true,\n            reviews: true\n          }\n        }\n      },\n      orderBy: {\n        createdAt: 'desc'\n      }\n    })\n\n    // Calculate additional stats\n    const coursesWithStats = courses.map(course => {\n      const totalStudents = course.enrollments.length\n      const avgRating = course.reviews.length > 0\n        ? course.reviews.reduce((sum, review) => sum + review.rating, 0) / course.reviews.length\n        : 0\n\n      const totalLessons = course.modules.reduce((sum, module) => sum + module.lessons.length, 0)\n      const totalModules = course.modules.length\n\n      return {\n        ...course,\n        stats: {\n          totalStudents,\n          avgRating: Math.round(avgRating * 10) / 10,\n          totalLessons,\n          totalModules\n        }\n      }\n    })\n\n    return NextResponse.json(coursesWithStats)\n  } catch (error) {\n    console.error('Error fetching courses:', error)\n    return NextResponse.json({ error: 'Internal server error' }, { status: 500 })\n  }\n}\n\nexport async function POST(request: NextRequest) {\n  try {\n    const session = await getServerSession(authOptions)\n\n    if (!session || session.user.role !== 'admin') {\n      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 })\n    }\n\n    const body = await request.json()\n    const {\n      title,\n      description,\n      price,\n      category,\n      level,\n      instructorId,\n      thumbnail,\n      duration,\n      language = 'English',\n      prerequisites,\n      learningObjectives,\n      tags\n    } = body\n\n    // Validate required fields\n    if (!title || !description || !price || !category || !level || !instructorId) {\n      return NextResponse.json({ error: 'Missing required fields' }, { status: 400 })\n    }\n\n    // Verify instructor exists\n    const instructor = await prisma.user.findUnique({\n      where: { id: instructorId }\n    })\n\n    if (!instructor) {\n      return NextResponse.json({ error: 'Instructor not found' }, { status: 404 })\n    }\n\n    const course = await prisma.course.create({\n      data: {\n        title,\n        description,\n        price: parseFloat(price),\n        category,\n        level,\n        instructorId,\n        thumbnail,\n        duration,\n        language,\n        prerequisites,\n        learningObjectives,\n        tags,\n        status: 'draft'\n      },\n      include: {\n        instructor: {\n          select: {\n            id: true,\n            name: true,\n            email: true\n          }\n        }\n      }\n    })\n\n    // Log admin action\n    await prisma.adminAction.create({\n      data: {\n        adminId: session.user.id,\n        action: 'CREATE_COURSE',\n        details: `Created course: ${title}`,\n        targetId: course.id,\n        targetType: 'course'\n      }\n    })\n\n    return NextResponse.json(course, { status: 201 })\n  } catch (error) {\n    console.error('Error creating course:', error)\n    return NextResponse.json({ error: 'Internal server error' }, { status: 500 })\n  }\n}"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;AACA;;;;;AAEO,eAAe,IAAI,OAAoB;IAC5C,IAAI;QACF,MAAM,UAAU,MAAM,IAAA,kOAAgB,EAAC,0MAAW;QAElD,IAAI,CAAC,WAAW,QAAQ,IAAI,CAAC,IAAI,KAAK,SAAS;YAC7C,OAAO,uNAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAe,GAAG;gBAAE,QAAQ;YAAI;QACpE;QAEA,MAAM,UAAU,MAAM,uMAAM,CAAC,MAAM,CAAC,QAAQ,CAAC;YAC3C,SAAS;gBACP,YAAY;oBACV,QAAQ;wBACN,IAAI;wBACJ,MAAM;wBACN,OAAO;oBACT;gBACF;gBACA,SAAS;oBACP,SAAS;wBACP,SAAS;oBACX;gBACF;gBACA,aAAa;oBACX,SAAS;wBACP,MAAM;4BACJ,QAAQ;gCACN,IAAI;gCACJ,MAAM;gCACN,OAAO;4BACT;wBACF;oBACF;gBACF;gBACA,QAAQ;oBACN,QAAQ;wBACN,aAAa;wBACb,SAAS;oBACX;gBACF;YACF;YACA,SAAS;gBACP,WAAW;YACb;QACF;QAEA,6BAA6B;QAC7B,MAAM,mBAAmB,QAAQ,GAAG,CAAC,CAAA;YACnC,MAAM,gBAAgB,OAAO,WAAW,CAAC,MAAM;YAC/C,MAAM,YAAY,OAAO,OAAO,CAAC,MAAM,GAAG,IACtC,OAAO,OAAO,CAAC,MAAM,CAAC,CAAC,KAAK,SAAW,MAAM,OAAO,MAAM,EAAE,KAAK,OAAO,OAAO,CAAC,MAAM,GACtF;YAEJ,MAAM,eAAe,OAAO,OAAO,CAAC,MAAM,CAAC,CAAC,KAAK,SAAW,MAAM,OAAO,OAAO,CAAC,MAAM,EAAE;YACzF,MAAM,eAAe,OAAO,OAAO,CAAC,MAAM;YAE1C,OAAO;gBACL,GAAG,MAAM;gBACT,OAAO;oBACL;oBACA,WAAW,KAAK,KAAK,CAAC,YAAY,MAAM;oBACxC;oBACA;gBACF;YACF;QACF;QAEA,OAAO,uNAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,2BAA2B;QACzC,OAAO,uNAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAwB,GAAG;YAAE,QAAQ;QAAI;IAC7E;AACF;AAEO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,UAAU,MAAM,IAAA,kOAAgB,EAAC,0MAAW;QAElD,IAAI,CAAC,WAAW,QAAQ,IAAI,CAAC,IAAI,KAAK,SAAS;YAC7C,OAAO,uNAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAe,GAAG;gBAAE,QAAQ;YAAI;QACpE;QAEA,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EACJ,KAAK,EACL,WAAW,EACX,KAAK,EACL,QAAQ,EACR,KAAK,EACL,YAAY,EACZ,SAAS,EACT,QAAQ,EACR,WAAW,SAAS,EACpB,aAAa,EACb,kBAAkB,EAClB,IAAI,EACL,GAAG;QAEJ,2BAA2B;QAC3B,IAAI,CAAC,SAAS,CAAC,eAAe,CAAC,SAAS,CAAC,YAAY,CAAC,SAAS,CAAC,cAAc;YAC5E,OAAO,uNAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAA0B,GAAG;gBAAE,QAAQ;YAAI;QAC/E;QAEA,2BAA2B;QAC3B,MAAM,aAAa,MAAM,uMAAM,CAAC,IAAI,CAAC,UAAU,CAAC;YAC9C,OAAO;gBAAE,IAAI;YAAa;QAC5B;QAEA,IAAI,CAAC,YAAY;YACf,OAAO,uNAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAuB,GAAG;gBAAE,QAAQ;YAAI;QAC5E;QAEA,MAAM,SAAS,MAAM,uMAAM,CAAC,MAAM,CAAC,MAAM,CAAC;YACxC,MAAM;gBACJ;gBACA;gBACA,OAAO,WAAW;gBAClB;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA,QAAQ;YACV;YACA,SAAS;gBACP,YAAY;oBACV,QAAQ;wBACN,IAAI;wBACJ,MAAM;wBACN,OAAO;oBACT;gBACF;YACF;QACF;QAEA,mBAAmB;QACnB,MAAM,uMAAM,CAAC,WAAW,CAAC,MAAM,CAAC;YAC9B,MAAM;gBACJ,SAAS,QAAQ,IAAI,CAAC,EAAE;gBACxB,QAAQ;gBACR,SAAS,CAAC,gBAAgB,EAAE,OAAO;gBACnC,UAAU,OAAO,EAAE;gBACnB,YAAY;YACd;QACF;QAEA,OAAO,uNAAY,CAAC,IAAI,CAAC,QAAQ;YAAE,QAAQ;QAAI;IACjD,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,0BAA0B;QACxC,OAAO,uNAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAwB,GAAG;YAAE,QAAQ;QAAI;IAC7E;AACF"}}]
}